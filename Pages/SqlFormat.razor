@inject IJSRuntime JS;
@using Microsoft.JSInterop;

@if (!Url.Contains("localhost")) {
    <iframe id="sqlformat" src="https://messidagod.github.io/allmylinks/DemoPage.html"></iframe>
}
else {
    <iframe id="sqlformat" src=@String.Concat(Url, "DemoPage.html")></iframe>
}

@code {

    bool ready;
    string Url { get; set; } = string.Empty;
    private static readonly HttpClient http = new();
    // 1
    protected override async Task OnInitializedAsync()
    {
        Url = await JS.InvokeAsync<string>("AML.geturl");
        await JS.InvokeVoidAsync("AML.logit", "Url: " + Url);
        await base.OnInitializedAsync();
    }

    private string Followers { get; set; } = "0";
    // 2
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            ready = true;
            StateHasChanged();
        }
        await base.OnAfterRenderAsync(firstRender);
    }
}
